# 【四】字节码生成

### 概述

*字节码生成是Javac编译过程的最后一个阶段。*

字节码生成阶段不仅仅是把前面各个步骤所生成的信息转化成字节码写到磁盘中，编译器还进行了少量的代码添加和转换工作。 

- 实例构造器<init>（）方法和类构造器<clinit>（）方法就是在这个阶段添加到语法树之中的
- 这里的实例构造器并不是指默认的构造函数，而是指我们自己重载的构造函数，

如果用户代码中没有提供任何构造函数，那编译器会自动添加一个没有参数、访问权限与当前类一致的默认构造函数，这个工作在填充符号表阶段就已经完成了。



在经历了一系列的语义解析之后，所解析出来的语法树就足够完善了。这个时候编译器最后的任务就是调用com.sun.tools.javac.jvm.Gen类，将这棵语法树编译为Java字节码文件。

这个时候，符合Java规范的**Java代码**就转换成符合Java规范的**字节码文件**了。



### 流程

- 将java的代码块转化为符合JVM语法的命令形式，这就是字节码
- 按照JVM的文件组织格式将字节码输出到*.class文件中